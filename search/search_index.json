{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Universal Content Access Protocol (UCAP)","text":"","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#universal-content-access-protocol","title":"Universal Content Access Protocol","text":"<p>The open standard for AI agents to access publisher content.</p> <p>UCAP defines building blocks for agentic content access \u2014 from discovering and subscribing to reading paywalled content \u2014 allowing the ecosystem to interoperate through one standard, without custom builds.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#learn","title":"Learn","text":"<p>Protocol overview, core concepts, and design principles.</p> <p>Read the docs</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#implement","title":"Implement","text":"<p>Technical spec, HTTP API, MCP integration, and reference implementations.</p> <p>View the spec</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#http-native","title":"HTTP-Native","text":"<p>Built on standard HTTP. Any client that speaks HTTP can access content \u2014 no proprietary SDKs required.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#agent-first","title":"Agent-First","text":"<p>Designed for automated access by AI agents, not human browsers. Structured data in, structured data out.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#human-in-loop-payments","title":"Human-in-Loop Payments","text":"<p>Agents facilitate content access. Humans authorize payments. Trust stays where it belongs.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#transport-agnostic","title":"Transport Agnostic","text":"<p>Works via REST, MCP, or other protocols. Choose the transport that fits your stack.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#platform-agnostic","title":"Platform Agnostic","text":"<p>Supports any content platform \u2014 Patreon, Ghost, WordPress, Substack, and more.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#secure-by-default","title":"Secure by Default","text":"<p>RFC 9421 HTTP Message Signatures on every request. OAuth 2.0 for user delegation. Rate limiting built in.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#see-it-in-action","title":"See it in action","text":"Content AccessCatalog SearchSubscription <p>An agent requests paywalled content. UCAP returns the full article if entitled, or subscription offers if not.</p> <pre><code>{\n  \"content\": {\n    \"html\": \"&lt;article&gt;Full post content...&lt;/article&gt;\",\n    \"text\": \"Plain text version...\",\n    \"format\": \"html\"\n  },\n  \"metadata\": {\n    \"id\": \"post-123\",\n    \"title\": \"Premium Article Title\",\n    \"author\": \"Creator Name\",\n    \"published_at\": \"2026-02-01T10:00:00Z\",\n    \"tier\": \"premium\",\n    \"word_count\": 2500\n  },\n  \"attribution\": {\n    \"required\": true,\n    \"format\": \"Source: [My Newsletter](https://example.com/post-123)\"\n  }\n}\n</code></pre> <p>Agents discover content across publishers with structured search \u2014 filter by category, price, language, and freshness.</p> <pre><code>{\n  \"query\": \"AI newsletters\",\n  \"filters\": {\n    \"categories\": [\"technology\", \"artificial-intelligence\"],\n    \"price\": { \"max\": 1500, \"currency\": \"USD\" },\n    \"recency\": \"30d\"\n  },\n  \"context\": {\n    \"intent\": \"weekly digest of AI news for research\"\n  }\n}\n</code></pre> <p>When content requires payment, UCAP returns a checkout URL for the human to complete \u2014 keeping agents out of the payment loop.</p> <pre><code>{\n  \"status\": \"pending_payment\",\n  \"checkout\": {\n    \"session_id\": \"session_abc123\",\n    \"url\": \"https://example.com/checkout/session_abc123\",\n    \"expires_at\": \"2026-02-04T13:00:00Z\"\n  },\n  \"message\": \"Complete payment to activate subscription\"\n}\n</code></pre>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#protocol-stack","title":"Protocol Stack","text":"<p>UCAP works alongside UCP for payment handling and RFC 9421 HTTP Message Signatures for agent identity verification.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Protocol Stack                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502   \u2502   UCAP   \u2502    \u2502   UCP    \u2502    \u2502   RFC 9421      \u2502      \u2502\n\u2502   \u2502(Content) \u2502    \u2502(Payments)\u2502    \u2502 (HTTP Signatures)\u2502      \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502        \u2502               \u2502                  \u2502                 \u2502\n\u2502        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2502\n\u2502                         \u2502                                   \u2502\n\u2502                  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502                  \u2502    HTTP     \u2502                            \u2502\n\u2502                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#get-started","title":"Get Started","text":"","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#read","title":"Read","text":"<p>Understand the core concepts and protocol design.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#implement_1","title":"Implement","text":"<p>Follow the specification to build a conformant server or agent.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"#contribute","title":"Contribute","text":"<p>Join the community and help shape the future of agentic content access.</p>","tags":["UCAP","AI agents","content access","open protocol"]},{"location":"documentation/conformance/","title":"Conformance","text":"<p>This section defines the requirements for conformant UCAP servers and agents.</p>"},{"location":"documentation/conformance/#server-conformance","title":"Server Conformance","text":""},{"location":"documentation/conformance/#must-required","title":"MUST (Required)","text":"<p>A conformant UCAP server MUST:</p> <ol> <li>Implement the Content Access capability (<code>dev.ucap.content.access</code>)</li> <li>Verify HTTP Message Signatures (RFC 9421) on all requests</li> <li>Return proper <code>402 Payment Required</code> responses with offers for paywalled content</li> <li>Support the well-known discovery endpoint (<code>/.well-known/ucap.json</code>)</li> </ol>"},{"location":"documentation/conformance/#should-recommended","title":"SHOULD (Recommended)","text":"<p>A conformant UCAP server SHOULD:</p> <ol> <li>Implement Catalog Search (<code>dev.ucap.content.catalog.search</code>)</li> <li>Implement Catalog Lookup (<code>dev.ucap.content.catalog.lookup</code>)</li> <li>Implement Subscription Management (<code>dev.ucap.content.subscription</code>)</li> <li>Provide MCP tools for AI agent integration</li> <li>Follow UCP error handling conventions (200 with messages, not 404) for catalog operations</li> </ol>"},{"location":"documentation/conformance/#may-optional","title":"MAY (Optional)","text":"<p>A conformant UCAP server MAY:</p> <ol> <li>Implement Identity Linking (<code>dev.ucap.content.identity</code>)</li> <li>Maintain a global publisher registry</li> <li>Support content access by original URL</li> </ol>"},{"location":"documentation/conformance/#agent-conformance","title":"Agent Conformance","text":""},{"location":"documentation/conformance/#must-required_1","title":"MUST (Required)","text":"<p>A conformant UCAP agent MUST:</p> <ol> <li>Sign all requests per RFC 9421</li> <li>Handle <code>402 Payment Required</code> responses gracefully</li> <li>Present checkout URLs to humans (not auto-purchase) for Stripe payments</li> <li>Respect <code>UCAP-Purpose</code> semantics</li> </ol>"},{"location":"documentation/conformance/#should-recommended_1","title":"SHOULD (Recommended)","text":"<p>A conformant UCAP agent SHOULD:</p> <ol> <li>Include the <code>UCAP-Purpose</code> header on content access requests</li> <li>Provide <code>context</code> with search requests for improved relevance</li> <li>Check <code>messages</code> arrays for errors on 200 responses</li> <li>Respect attribution requirements when displaying content</li> </ol>"},{"location":"documentation/conformance/#may-optional_1","title":"MAY (Optional)","text":"<p>A conformant UCAP agent MAY:</p> <ol> <li>Use the <code>intent</code> field in context to improve search relevance</li> <li>Cache catalog responses for improved performance</li> <li>Support multiple transport bindings (REST, MCP)</li> </ol>"},{"location":"documentation/conformance/#conformance-levels","title":"Conformance Levels","text":"Level Requirements Basic Content Access + RFC 9421 signature verification Standard Basic + Catalog Search + Catalog Lookup Full Standard + Subscription + Identity Linking + MCP"},{"location":"documentation/core-concepts/","title":"Core Concepts","text":"<p>The Universal Content Access Protocol (UCAP) is an open protocol that enables AI agents and automated systems to discover, access, and subscribe to long-form content from publishers. Built on HTTP with RFC 9421 HTTP Message Signatures for agent authentication, UCAP provides a standardized way for agents to interact with paywalled content, handle subscription purchases, and access entitled content \u2014 all while keeping humans in control of payment decisions.</p>"},{"location":"documentation/core-concepts/#problem-statement","title":"Problem Statement","text":"<p>The rise of AI agents creates new challenges for content publishers:</p> <ul> <li>No standardized access \u2014 Agents lack a uniform way to access paywalled content</li> <li>Authentication gaps \u2014 Traditional cookie/session auth doesn't work for autonomous agents</li> <li>Payment friction \u2014 Agents cannot execute payments autonomously; humans must authorize</li> <li>Discovery limitations \u2014 Agents cannot easily discover what content is available</li> </ul>"},{"location":"documentation/core-concepts/#design-goals","title":"Design Goals","text":"<p>UCAP is designed with the following principles:</p> Principle Description HTTP-Native Built on standard HTTP, accessible to any client Agent-First Designed for automated access, not human browsers Human-in-Loop Payments Agents facilitate, humans authorize payments Transport Agnostic Works via REST, MCP, or other protocols Platform Agnostic Supports any content platform (Patreon, Ghost, WordPress, etc.)"},{"location":"documentation/core-concepts/#roles-and-participants","title":"Roles and Participants","text":""},{"location":"documentation/core-concepts/#agent","title":"Agent","text":"<p>An automated system \u2014 AI assistant, bot, or script \u2014 that accesses content on behalf of a user.</p> <p>Responsibilities:</p> <ul> <li>Authenticate via HTTP Message Signatures (RFC 9421)</li> <li>Discover and search for content via the Catalog capability</li> <li>Request content and handle entitlement responses</li> <li>Present checkout URLs to humans when payment is required</li> </ul> <p>Examples: Claude, ChatGPT, custom AI assistants, automated research tools</p>"},{"location":"documentation/core-concepts/#publisher","title":"Publisher","text":"<p>A content creator or organization offering content via UCAP.</p> <p>Responsibilities:</p> <ul> <li>Register with a UCAP server and configure content tiers</li> <li>Map content to access tiers (public, free, members, premium)</li> <li>Set pricing and subscription options</li> <li>Provide content in structured format</li> </ul> <p>Examples: Newsletter authors, media organizations, independent bloggers</p>"},{"location":"documentation/core-concepts/#subscriber","title":"Subscriber","text":"<p>A human user who authorizes an agent to access content on their behalf.</p> <p>Responsibilities:</p> <ul> <li>Authorize agent access via OAuth identity linking</li> <li>Complete payment when subscription is required</li> <li>Manage entitlements and subscriptions</li> </ul>"},{"location":"documentation/core-concepts/#ucap-server","title":"UCAP Server","text":"<p>A service implementing the UCAP specification that mediates between agents and publishers.</p> <p>Responsibilities:</p> <ul> <li>Verify agent authentication (RFC 9421 HTTP signatures)</li> <li>Check entitlements and return content or offers</li> <li>Manage subscriptions and payment sessions</li> <li>Maintain the content catalog</li> </ul>"},{"location":"documentation/core-concepts/#key-goals","title":"Key Goals","text":"<ul> <li>Interoperability \u2014 Any agent can access any publisher's content through one protocol</li> <li>Discovery \u2014 Agents can search and browse content catalogs programmatically</li> <li>Security \u2014 Cryptographic agent identity verification on every request</li> <li>Agentic Commerce \u2014 Structured payment flows that keep humans in control</li> </ul>"},{"location":"documentation/core-concepts/#protocol-stack","title":"Protocol Stack","text":"<p>UCAP is designed to work alongside UCP (Universal Commerce Protocol) for payment handling and RFC 9421 HTTP Message Signatures for agent identity verification.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Protocol Stack                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502   \u2502   UCAP   \u2502    \u2502   UCP    \u2502    \u2502   RFC 9421      \u2502      \u2502\n\u2502   \u2502(Content) \u2502    \u2502(Payments)\u2502    \u2502 (HTTP Signatures)\u2502      \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502        \u2502               \u2502                  \u2502                 \u2502\n\u2502        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2502\n\u2502                         \u2502                                   \u2502\n\u2502                  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502                  \u2502    HTTP     \u2502                            \u2502\n\u2502                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"documentation/core-concepts/#terminology","title":"Terminology","text":"Term Definition Agent An automated system (AI assistant, bot, script) accessing content Publisher A content creator or organization offering content via UCAP Subscriber A human user who authorizes an agent to access content on their behalf Entitlement A record granting an agent/user access to specific content tiers UCAP Server A service implementing the UCAP specification Content Store Storage system holding publisher content Capability A discrete piece of protocol functionality (e.g., content access, catalog search)"},{"location":"documentation/core-concepts/#content-access-model","title":"Content Access Model","text":"<p>UCAP defines four content access tiers, forming a progressive hierarchy:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Content Access Tiers                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502   PUBLIC          Anyone can access, no authentication       \u2502\n\u2502      \u2502                                                       \u2502\n\u2502      \u25bc                                                       \u2502\n\u2502   FREE            Requires agent authentication only         \u2502\n\u2502      \u2502                                                       \u2502\n\u2502      \u25bc                                                       \u2502\n\u2502   MEMBERS         Requires subscription (any paid tier)      \u2502\n\u2502      \u2502                                                       \u2502\n\u2502      \u25bc                                                       \u2502\n\u2502   PREMIUM         Requires specific tier subscription        \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"documentation/core-concepts/#response-model","title":"Response Model","text":"<p>All UCAP content requests result in one of three responses:</p> Response HTTP Status Meaning ALLOW <code>200 OK</code> Content returned, agent is entitled DENY <code>402 Payment Required</code> Subscription needed, offers returned ERROR <code>4xx/5xx</code> Authentication failure, not found, etc."},{"location":"documentation/core-concepts/#core-concepts-summary","title":"Core Concepts Summary","text":"<p>UCAP is organized around three concept categories:</p> <ul> <li>Capabilities \u2014 Discrete protocol functions that servers implement (content access, catalog search, catalog lookup, subscription management, identity linking)</li> <li>Extensions \u2014 Optional augmentations to capabilities via the <code>metadata</code> object (topics, freshness, ratings, recommendations)</li> <li>Transports \u2014 Protocol bindings for different integration patterns (REST/HTTP, MCP)</li> </ul>"},{"location":"specification/catalog-lookup/","title":"Catalog Lookup","text":"<ul> <li>Capability Name: <code>dev.ucap.content.catalog.lookup</code></li> </ul> <p>Direct lookup of a publication or post by ID. Supports multiple ID types for flexibility across platforms.</p>"},{"location":"specification/catalog-lookup/#id-types","title":"ID Types","text":"ID Format Description Example <code>pub_{id}</code> Publication by internal ID <code>pub_ai-digest</code> <code>post_{id}</code> Post by internal ID <code>post_abc123</code> <code>slug:{slug}</code> Publication by slug <code>slug:ai-digest</code> <code>patreon:{id}</code> Patreon post/campaign ID <code>patreon:12345678</code> <code>ghost:{id}</code> Ghost post ID <code>ghost:abc123</code> <code>url:{encoded_url}</code> By original URL (URL-encoded) <code>url:https%3A%2F%2F...</code>"},{"location":"specification/catalog-lookup/#endpoints","title":"Endpoints","text":"Method Path Description <code>GET</code> <code>/v1/catalog/item/{id}</code> Look up by ID with query params <code>POST</code> <code>/v1/catalog/lookup</code> Look up by ID with full context"},{"location":"specification/catalog-lookup/#rest-binding-get","title":"REST Binding (GET)","text":"<p>For simple lookups with optional query parameters.</p> RequestResponse (Publication) <pre><code>GET /v1/catalog/item/pub_ai-digest?language=en&amp;currency=USD HTTP/1.1\nHost: api.example.com\n</code></pre> <p>Supported query parameters: <code>language</code>, <code>currency</code>, <code>country</code></p> <pre><code>{\n  \"type\": \"publication\",\n  \"publication\": {\n    \"id\": \"pub_ai-digest\",\n    \"slug\": \"ai-digest\",\n    \"title\": \"AI Digest Weekly\",\n    \"description\": \"Curated AI news and analysis every Monday. Deep dives into the latest AI research, industry news, and practical applications.\",\n    \"url\": \"https://example.com/ai-digest\",\n    \"category\": \"technology\",\n    \"price\": {\n      \"min\": 0,\n      \"max\": 1000,\n      \"currency\": \"USD\",\n      \"interval\": \"month\"\n    },\n    \"media\": [\n      {\n        \"type\": \"image\",\n        \"url\": \"https://example.com/media/ai-digest-logo.png\",\n        \"alt\": \"AI Digest logo\",\n        \"width\": 400,\n        \"height\": 400\n      }\n    ],\n    \"tiers\": [\n      {\n        \"id\": \"tier_free\",\n        \"name\": \"Free\",\n        \"description\": \"Weekly AI news roundup\",\n        \"price\": { \"amount\": 0 },\n        \"features\": [\"Weekly newsletter\", \"Public archive access\"],\n        \"post_count\": 52\n      },\n      {\n        \"id\": \"tier_pro\",\n        \"name\": \"Pro\",\n        \"description\": \"Full access to all content\",\n        \"price\": {\n          \"amount\": 1000,\n          \"currency\": \"USD\",\n          \"interval\": \"month\"\n        },\n        \"features\": [\n          \"Everything in Free\",\n          \"Deep dive analyses\",\n          \"Early access\",\n          \"Discord community\"\n        ],\n        \"post_count\": 156\n      }\n    ],\n    \"recent_posts\": [\n      {\n        \"id\": \"post_xyz789\",\n        \"title\": \"GPT-5: What We Know So Far\",\n        \"excerpt\": \"An analysis of the leaked benchmarks and what they mean...\",\n        \"published_at\": \"2026-02-05T10:00:00Z\",\n        \"min_tier\": \"tier_pro\",\n        \"reading_time_minutes\": 12\n      },\n      {\n        \"id\": \"post_xyz788\",\n        \"title\": \"Weekly AI News Roundup #208\",\n        \"excerpt\": \"This week: Claude 4, Gemini updates, and more...\",\n        \"published_at\": \"2026-02-03T10:00:00Z\",\n        \"min_tier\": \"tier_free\",\n        \"reading_time_minutes\": 5\n      }\n    ],\n    \"post_count\": 208,\n    \"language\": \"en\",\n    \"created_at\": \"2024-01-15T00:00:00Z\",\n    \"metadata\": {\n      \"source_platform\": \"patreon\",\n      \"source_id\": \"campaign_12345\",\n      \"subscriber_count\": 5000,\n      \"publishing_frequency\": \"weekly\"\n    }\n  },\n  \"messages\": []\n}\n</code></pre>"},{"location":"specification/catalog-lookup/#rest-binding-post","title":"REST Binding (POST)","text":"<p>For lookups with full context support.</p> RequestResponse (Post) <pre><code>POST /v1/catalog/lookup HTTP/1.1\nHost: api.example.com\nContent-Type: application/json\n\n{\n  \"id\": \"pub_ai-digest\",\n  \"context\": {\n    \"language\": \"en\",\n    \"currency\": \"USD\",\n    \"intent\": \"checking subscription options\"\n  }\n}\n</code></pre> <p>When looking up a post ID, returns the parent publication summary alongside the requested post:</p> <pre><code>{\n  \"type\": \"post\",\n  \"publication\": {\n    \"id\": \"pub_ai-digest\",\n    \"slug\": \"ai-digest\",\n    \"title\": \"AI Digest Weekly\"\n  },\n  \"post\": {\n    \"id\": \"post_xyz789\",\n    \"external_id\": \"patreon:post_98765\",\n    \"title\": \"GPT-5: What We Know So Far\",\n    \"excerpt\": \"An analysis of the leaked benchmarks and what they mean for the industry...\",\n    \"published_at\": \"2026-02-05T10:00:00Z\",\n    \"updated_at\": \"2026-02-05T14:30:00Z\",\n    \"min_tier\": {\n      \"id\": \"tier_pro\",\n      \"name\": \"Pro\",\n      \"price\": {\n        \"amount\": 1000,\n        \"currency\": \"USD\",\n        \"interval\": \"month\"\n      }\n    },\n    \"category\": [\"analysis\", \"gpt\", \"openai\"],\n    \"media\": [\n      {\n        \"type\": \"image\",\n        \"url\": \"https://example.com/media/gpt5-analysis-hero.png\",\n        \"alt\": \"GPT-5 analysis header image\"\n      }\n    ],\n    \"word_count\": 2500,\n    \"reading_time_minutes\": 12,\n    \"content_url\": \"/v1/content/ai-digest/post_xyz789\",\n    \"metadata\": {\n      \"source_url\": \"https://patreon.com/posts/98765\"\n    }\n  },\n  \"messages\": []\n}\n</code></pre>"},{"location":"specification/catalog-lookup/#mcp-binding","title":"MCP Binding","text":"<pre><code>{\n  \"name\": \"get_catalog_item\",\n  \"description\": \"Get publication or post details by ID (supports multiple ID formats)\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"id\": {\n        \"type\": \"string\",\n        \"description\": \"ID in format: pub_{id}, post_{id}, slug:{slug}, patreon:{id}, url:{encoded_url}\"\n      },\n      \"context\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"language\": { \"type\": \"string\" },\n          \"currency\": { \"type\": \"string\" }\n        }\n      }\n    },\n    \"required\": [\"id\"]\n  }\n}\n</code></pre>"},{"location":"specification/catalog-lookup/#error-handling","title":"Error Handling","text":"<p>Following UCP convention, <code>NOT_FOUND</code> returns HTTP 200 with an error message (not 404):</p> <pre><code>{\n  \"type\": \"error\",\n  \"publication\": null,\n  \"post\": null,\n  \"messages\": [\n    {\n      \"type\": \"error\",\n      \"code\": \"NOT_FOUND\",\n      \"message\": \"Publication not found: pub_invalid-id\",\n      \"severity\": \"recoverable\"\n    }\n  ]\n}\n</code></pre>"},{"location":"specification/catalog-lookup/#guidelines","title":"Guidelines","text":""},{"location":"specification/catalog-lookup/#for-ucap-servers","title":"For UCAP Servers","text":"<ul> <li>Servers MUST support lookup by internal IDs (<code>pub_*</code>, <code>post_*</code>)</li> <li>Servers SHOULD support lookup by slug (<code>slug:*</code>)</li> <li>Servers MAY support lookup by external platform IDs (<code>patreon:*</code>, <code>ghost:*</code>)</li> <li>Servers SHOULD return <code>recent_posts</code> for publication lookups</li> <li>Servers MUST follow UCP error handling convention (200 with messages, not 404)</li> </ul>"},{"location":"specification/catalog-lookup/#for-agents","title":"For Agents","text":"<ul> <li>Agents SHOULD prefer internal IDs when available</li> <li>Agents SHOULD provide <code>context</code> for localized responses</li> <li>Agents MUST check the <code>messages</code> array for errors even on 200 responses</li> </ul>"},{"location":"specification/catalog-search/","title":"Catalog Search","text":"<ul> <li>Capability Name: <code>dev.ucap.content.catalog.search</code></li> </ul> <p>Free-text search across publishers and posts with filters, context, and pagination.</p>"},{"location":"specification/catalog-search/#rest-binding","title":"REST Binding","text":""},{"location":"specification/catalog-search/#endpoint","title":"Endpoint","text":"Method Path Description <code>POST</code> <code>/v1/catalog/search</code> Search publications and posts"},{"location":"specification/catalog-search/#example","title":"Example","text":"RequestResponse <pre><code>POST /v1/catalog/search HTTP/1.1\nHost: api.example.com\nContent-Type: application/json\nSignature-Input: sig=(\"@method\" \"@path\" \"host\" \"content-digest\");keyid=\"agent_123\"\nSignature: sig=:BASE64_SIGNATURE:\n\n{\n  \"query\": \"AI newsletters\",\n  \"filters\": {\n    \"categories\": [\"technology\", \"artificial-intelligence\"],\n    \"price\": {\n      \"min\": 0,\n      \"max\": 1500,\n      \"currency\": \"USD\"\n    },\n    \"language\": \"en\",\n    \"recency\": \"30d\",\n    \"tier_access\": \"free\"\n  },\n  \"context\": {\n    \"language\": \"en\",\n    \"currency\": \"USD\",\n    \"intent\": \"weekly digest of AI news for research\"\n  },\n  \"pagination\": {\n    \"limit\": 10,\n    \"cursor\": null\n  }\n}\n</code></pre> <pre><code>{\n  \"results\": [\n    {\n      \"type\": \"publication\",\n      \"publication\": {\n        \"id\": \"pub_ai-digest\",\n        \"slug\": \"ai-digest\",\n        \"title\": \"AI Digest Weekly\",\n        \"description\": \"Curated AI news and analysis every Monday\",\n        \"url\": \"https://example.com/ai-digest\",\n        \"category\": \"technology\",\n        \"price\": {\n          \"min\": 0,\n          \"max\": 1000,\n          \"currency\": \"USD\",\n          \"interval\": \"month\"\n        },\n        \"media\": [\n          {\n            \"type\": \"image\",\n            \"url\": \"https://example.com/media/ai-digest-logo.png\",\n            \"alt\": \"AI Digest logo\"\n          }\n        ],\n        \"tiers\": [\n          {\n            \"id\": \"tier_free\",\n            \"name\": \"Free\",\n            \"price\": { \"amount\": 0 },\n            \"post_count\": 52\n          },\n          {\n            \"id\": \"tier_pro\",\n            \"name\": \"Pro\",\n            \"price\": {\n              \"amount\": 1000,\n              \"currency\": \"USD\",\n              \"interval\": \"month\"\n            },\n            \"post_count\": 156\n          }\n        ],\n        \"post_count\": 208,\n        \"language\": \"en\",\n        \"metadata\": {\n          \"source_platform\": \"patreon\",\n          \"subscriber_count\": 5000\n        }\n      },\n      \"relevance_score\": 0.95\n    }\n  ],\n  \"pagination\": {\n    \"total\": 45,\n    \"limit\": 10,\n    \"cursor\": \"eyJvZmZzZXQiOjEwfQ==\"\n  },\n  \"messages\": []\n}\n</code></pre>"},{"location":"specification/catalog-search/#request-schema","title":"Request Schema","text":"Field Type Required Description <code>query</code> string No Free-text search query <code>filters</code> object No Search filters (see below) <code>filters.categories</code> string[] No Category/tag filter <code>filters.price</code> object No Price range filter <code>filters.price.min</code> integer No Minimum price in cents <code>filters.price.max</code> integer No Maximum price in cents <code>filters.price.currency</code> string No Currency code (default: <code>USD</code>) <code>filters.language</code> string No Content language (BCP 47) <code>filters.recency</code> string No Content freshness: <code>\"24h\"</code>, <code>\"7d\"</code>, <code>\"30d\"</code>, <code>\"90d\"</code> <code>filters.tier_access</code> string No <code>\"free\"</code>, <code>\"paid\"</code>, <code>\"any\"</code> <code>context</code> object No Request context (see Catalog Overview) <code>pagination.limit</code> integer No Results per page (default: 10, max: 25) <code>pagination.cursor</code> string No Cursor for next page"},{"location":"specification/catalog-search/#response-schema","title":"Response Schema","text":"Field Type Description <code>results[]</code> array Array of search results <code>results[].type</code> string Result type: <code>\"publication\"</code> or <code>\"post\"</code> <code>results[].publication</code> object Publication data (see Catalog Overview) <code>results[].relevance_score</code> number Relevance score (0.0\u20131.0) <code>pagination.total</code> integer Total number of results <code>pagination.limit</code> integer Results per page <code>pagination.cursor</code> string Cursor for next page (null if last page) <code>messages[]</code> array Informational messages"},{"location":"specification/catalog-search/#mcp-binding","title":"MCP Binding","text":"<pre><code>{\n  \"name\": \"search_catalog\",\n  \"description\": \"Search for publications and posts\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"query\": { \"type\": \"string\" },\n      \"filters\": { \"$ref\": \"#/definitions/SearchFilters\" },\n      \"context\": { \"$ref\": \"#/definitions/Context\" },\n      \"pagination\": { \"$ref\": \"#/definitions/Pagination\" }\n    }\n  }\n}\n</code></pre> <p>See MCP Integration for the full MCP tool definition.</p>"},{"location":"specification/catalog-search/#guidelines","title":"Guidelines","text":""},{"location":"specification/catalog-search/#for-ucap-servers","title":"For UCAP Servers","text":"<ul> <li>Servers SHOULD support free-text search across publication titles, descriptions, and post content</li> <li>Servers SHOULD support all filter fields defined in the request schema</li> <li>Servers MUST return results sorted by relevance when a query is provided</li> <li>Servers MAY use the <code>context.intent</code> field to improve search relevance</li> <li>Servers MUST respect <code>pagination.limit</code> (max 25 per page)</li> </ul>"},{"location":"specification/catalog-search/#for-agents","title":"For Agents","text":"<ul> <li>Agents SHOULD provide the <code>context</code> object for better search results</li> <li>Agents SHOULD use the <code>intent</code> field to describe the semantic goal of the search</li> <li>Agents MAY cache search results for improved performance</li> </ul>"},{"location":"specification/catalog/","title":"Catalog Capability","text":"<p>The Catalog capability enables agents to discover publishers and search content before accessing it. This fills the \"discovery gap\" \u2014 while Content Access assumes you already have a post ID, the Catalog enables scenarios like \"find me AI newsletters under $10/month\" that lead to subscription and access.</p> <p>Following UCP's catalog pattern, UCAP splits the catalog into two independent capabilities that implementers can adopt separately:</p> Capability ID Description Catalog Search <code>dev.ucap.content.catalog.search</code> Free-text search with filters and pagination Catalog Lookup <code>dev.ucap.content.catalog.lookup</code> Direct lookup by publication or post ID"},{"location":"specification/catalog/#motivation","title":"Motivation","text":"<p>Without a standardized catalog interface:</p> <ul> <li>Agents cannot discover what content is available</li> <li>Every integration requires custom discovery mechanisms</li> <li>There's no way to search across multiple publishers</li> </ul>"},{"location":"specification/catalog/#data-structures","title":"Data Structures","text":""},{"location":"specification/catalog/#publication","title":"Publication","text":"<p>A publication represents a publisher's content collection (analogous to UCP's <code>Product</code>).</p> Field Type Description <code>id</code> string Unique publication identifier <code>slug</code> string URL-friendly identifier <code>title</code> string Publication name <code>description</code> string Publisher description <code>url</code> string Canonical URL <code>category</code> string Primary category <code>price</code> PriceRange Price range (min/max across tiers) <code>media[]</code> array Images, logos (first = featured) <code>tiers[]</code> array Subscription options (first = featured) <code>rating</code> object Aggregate agent ratings (optional) <code>post_count</code> integer Total posts available <code>language</code> string Primary content language (BCP 47) <code>metadata</code> object Publisher-defined extensions"},{"location":"specification/catalog/#post","title":"Post","text":"<p>A post represents a single piece of content (analogous to UCP's <code>Variant</code>).</p> Field Type Description <code>id</code> string Post identifier (used as <code>post_id</code> in content access) <code>external_id</code> string Source platform ID (e.g., Patreon post ID) <code>title</code> string Post title <code>excerpt</code> string Preview text <code>published_at</code> string Publication timestamp (RFC 3339) <code>min_tier</code> string Minimum tier required for access <code>category</code> string/array Post category or tags <code>media[]</code> array Featured images <code>word_count</code> integer Content length <code>reading_time_minutes</code> integer Estimated read time <code>metadata</code> object Post-specific extensions"},{"location":"specification/catalog/#context-object","title":"Context Object","text":"<p>The context object allows agents to specify preferences that affect search and display.</p> <pre><code>{\n  \"context\": {\n    \"language\": \"en\",\n    \"currency\": \"USD\",\n    \"country\": \"US\",\n    \"intent\": \"research on AI agent architectures\"\n  }\n}\n</code></pre> Field Type Description Example <code>language</code> string Preferred content language (BCP 47) <code>\"en\"</code>, <code>\"es\"</code>, <code>\"fr-CA\"</code> <code>currency</code> string Preferred price display currency (ISO 4217) <code>\"USD\"</code>, <code>\"EUR\"</code> <code>country</code> string Agent's operating region (ISO 3166-1 alpha-2) <code>\"US\"</code>, <code>\"GB\"</code> <code>intent</code> string Semantic description of search goal <code>\"find weekly AI newsletters\"</code>"},{"location":"specification/catalog/#extensions","title":"Extensions","text":"<p>The catalog capability is designed for extension. Publishers and platforms can add domain-specific fields via the <code>metadata</code> object without protocol changes.</p>"},{"location":"specification/catalog/#planned-extensions","title":"Planned Extensions","text":"Extension Capability ID Description Topics <code>dev.ucap.content.catalog.topics</code> Detailed topic/tag taxonomy Freshness <code>dev.ucap.content.catalog.freshness</code> Content recency signals Ratings <code>dev.ucap.content.catalog.ratings</code> Agent ratings and reviews Recommendations <code>dev.ucap.content.catalog.recommendations</code> Personalized suggestions"},{"location":"specification/content-access/","title":"Content Access Capability","text":"<ul> <li>Capability Name: <code>dev.ucap.content.access</code></li> </ul> <p>The primary capability \u2014 fetching content with automatic entitlement verification. When an agent requests content, the server checks the agent's entitlements and returns either the full content (200) or subscription offers (402).</p>"},{"location":"specification/content-access/#endpoints","title":"Endpoints","text":"Method Path Description <code>GET</code> <code>/v1/content/{publisher_id}/{post_id}</code> Fetch content by publisher and post ID <code>GET</code> <code>/v1/content?url={original_url}</code> Fetch content by original URL"},{"location":"specification/content-access/#operations","title":"Operations","text":""},{"location":"specification/content-access/#fetch-content","title":"Fetch Content","text":"<p>Retrieve a single piece of content. The server verifies the agent's identity and entitlements before returning the content.</p> RequestResponse (200 \u2014 Entitled)Response (402 \u2014 Payment Required) <pre><code>GET /v1/content/{publisher_id}/{post_id} HTTP/1.1\nHost: api.example.com\nSignature-Agent: {agent_id}\nSignature: sig=:{base64_signature}:\nSignature-Input: sig=(\"@method\" \"@path\" \"host\" \"date\");keyid=\"{agent_id}\"\nDate: Wed, 04 Feb 2026 12:00:00 GMT\nUCAP-Purpose: read\nAuthorization: Bearer {user_token}\n</code></pre> <p>The <code>Authorization</code> header is OPTIONAL \u2014 it is only required for identity-linked requests where an agent acts on behalf of a specific user.</p> <pre><code>{\n  \"content\": {\n    \"html\": \"&lt;article&gt;Full post content...&lt;/article&gt;\",\n    \"text\": \"Plain text version...\",\n    \"format\": \"html\"\n  },\n  \"metadata\": {\n    \"id\": \"post-123\",\n    \"title\": \"Premium Article Title\",\n    \"author\": \"Creator Name\",\n    \"published_at\": \"2026-02-01T10:00:00Z\",\n    \"updated_at\": \"2026-02-02T15:30:00Z\",\n    \"tier\": \"premium\",\n    \"word_count\": 2500,\n    \"reading_time_minutes\": 10\n  },\n  \"publisher\": {\n    \"id\": \"my-newsletter\",\n    \"name\": \"My Newsletter\",\n    \"url\": \"https://example.com/my-newsletter\"\n  },\n  \"attribution\": {\n    \"required\": true,\n    \"format\": \"Source: [My Newsletter](https://example.com/my-newsletter/post-123)\"\n  }\n}\n</code></pre> <pre><code>{\n  \"error\": {\n    \"code\": \"payment_required\",\n    \"message\": \"This content requires a subscription\"\n  },\n  \"teaser\": {\n    \"title\": \"Premium Article Title\",\n    \"excerpt\": \"First 200 characters of the article...\",\n    \"author\": \"Creator Name\",\n    \"published_at\": \"2026-02-01T10:00:00Z\"\n  },\n  \"offers\": [\n    {\n      \"tier_id\": \"premium\",\n      \"tier_name\": \"Premium\",\n      \"price\": {\n        \"amount\": 1500,\n        \"currency\": \"USD\",\n        \"interval\": \"month\"\n      },\n      \"features\": [\n        \"Full access to all premium posts\",\n        \"Early access to new content\"\n      ],\n      \"checkout_url\": \"https://example.com/checkout/session_abc123\"\n    },\n    {\n      \"tier_id\": \"supporter\",\n      \"tier_name\": \"Supporter\",\n      \"price\": {\n        \"amount\": 500,\n        \"currency\": \"USD\",\n        \"interval\": \"month\"\n      },\n      \"features\": [\n        \"Access to members-only posts\"\n      ],\n      \"checkout_url\": \"https://example.com/checkout/session_def456\"\n    }\n  ],\n  \"publisher\": {\n    \"id\": \"my-newsletter\",\n    \"name\": \"My Newsletter\"\n  }\n}\n</code></pre>"},{"location":"specification/content-access/#response-fields","title":"Response Fields","text":""},{"location":"specification/content-access/#content-object","title":"Content Object","text":"Field Type Description <code>html</code> string Full content in HTML format <code>text</code> string Plain text version of the content <code>format</code> string Content format (<code>html</code>, <code>markdown</code>, <code>text</code>)"},{"location":"specification/content-access/#metadata-object","title":"Metadata Object","text":"Field Type Description <code>id</code> string Post identifier <code>title</code> string Post title <code>author</code> string Author name <code>published_at</code> string Publication timestamp (RFC 3339) <code>updated_at</code> string Last update timestamp (RFC 3339) <code>tier</code> string Content tier ID <code>word_count</code> integer Content word count <code>reading_time_minutes</code> integer Estimated reading time in minutes"},{"location":"specification/content-access/#attribution-object","title":"Attribution Object","text":"Field Type Description <code>required</code> boolean Whether attribution is required <code>license</code> string Content license (e.g., <code>CC-BY-4.0</code>) <code>format</code> string Suggested attribution format string"},{"location":"specification/content-access/#offer-object-402-response","title":"Offer Object (402 Response)","text":"Field Type Description <code>tier_id</code> string Subscription tier identifier <code>tier_name</code> string Human-readable tier name <code>price</code> object Price with <code>amount</code> (cents), <code>currency</code>, <code>interval</code> <code>features</code> string[] List of tier features <code>checkout_url</code> string URL for the human to complete payment"},{"location":"specification/content-access/#status-codes","title":"Status Codes","text":"Status Meaning <code>200 OK</code> Content returned \u2014 agent is entitled <code>402 Payment Required</code> Subscription needed \u2014 offers returned <code>403 Forbidden</code> Agent not authenticated or invalid signature <code>404 Not Found</code> Post does not exist <code>429 Too Many Requests</code> Rate limit exceeded"},{"location":"specification/content-access/#guidelines","title":"Guidelines","text":""},{"location":"specification/content-access/#for-ucap-servers","title":"For UCAP Servers","text":"<ul> <li>Servers MUST verify HTTP Message Signatures (RFC 9421) before returning content</li> <li>Servers MUST return 402 with at least one offer for paywalled content</li> <li>Servers SHOULD include a <code>teaser</code> with title and excerpt in 402 responses</li> <li>Servers SHOULD include <code>attribution</code> requirements in 200 responses</li> <li>Servers MAY support content access by original URL via the <code>?url=</code> query parameter</li> </ul>"},{"location":"specification/content-access/#for-agents","title":"For Agents","text":"<ul> <li>Agents MUST sign all requests per RFC 9421</li> <li>Agents MUST handle 402 responses gracefully</li> <li>Agents MUST present checkout URLs to humans \u2014 not auto-purchase</li> <li>Agents SHOULD include the <code>UCAP-Purpose</code> header</li> <li>Agents SHOULD respect attribution requirements when displaying content</li> </ul>"},{"location":"specification/content-discovery/","title":"Content Discovery","text":"<p>Content discovery enables agents to find UCAP-enabled publishers and content sources. UCAP provides two discovery mechanisms: a well-known endpoint for individual publishers and a global registry for cross-publisher discovery.</p>"},{"location":"specification/content-discovery/#well-known-endpoint","title":"Well-Known Endpoint","text":"<p>Publishers MAY expose a discovery document at a well-known URL on their domain. This allows agents to determine whether a publisher supports UCAP and find the UCAP server endpoint.</p> RequestResponse <pre><code>GET /.well-known/ucap.json HTTP/1.1\nHost: newsletter.example.com\n</code></pre> <pre><code>{\n  \"ucap_version\": \"1.0\",\n  \"publisher_id\": \"my-newsletter\",\n  \"publisher_name\": \"My Newsletter\",\n  \"ucap_server\": \"https://api.example.com\",\n  \"catalog_url\": \"https://api.example.com/v1/publishers/my-newsletter/catalog\",\n  \"subscribe_url\": \"https://example.com/subscribe/my-newsletter\"\n}\n</code></pre>"},{"location":"specification/content-discovery/#discovery-document-fields","title":"Discovery Document Fields","text":"Field Type Required Description <code>ucap_version</code> string Yes UCAP specification version <code>publisher_id</code> string Yes Publisher's unique identifier <code>publisher_name</code> string Yes Publisher's display name <code>ucap_server</code> string Yes Base URL of the UCAP server <code>catalog_url</code> string No Direct URL to publisher's catalog <code>subscribe_url</code> string No URL for subscription page"},{"location":"specification/content-discovery/#global-registry","title":"Global Registry","text":"<p>UCAP servers MAY maintain a global registry of publishers for agent discovery. The registry allows agents to search for publishers without knowing their individual domains.</p> <p>Note</p> <p>The global registry specification is under development. Current implementations should rely on the well-known endpoint for publisher discovery and the Catalog Search capability for content discovery.</p>"},{"location":"specification/content-discovery/#publisher-registration","title":"Publisher Registration","text":"<p>Publishers register with a UCAP server to make their content available to agents.</p>"},{"location":"specification/content-discovery/#registration-requirements","title":"Registration Requirements","text":"Requirement Description Content Source Connection to content platform (API, export, etc.) Tier Configuration Mapping of content tiers to prices Payment Setup Payment processor connection (Stripe, etc.)"},{"location":"specification/content-discovery/#supported-content-sources","title":"Supported Content Sources","text":"<p>UCAP is source-agnostic. Common integrations include:</p> Source Integration Method Patreon OAuth 2.0 + API Ghost Admin API Key WordPress REST API + Application Password Substack Manual export (ZIP upload) Custom Webhook or direct upload"},{"location":"specification/content-discovery/#guidelines","title":"Guidelines","text":""},{"location":"specification/content-discovery/#for-publishers","title":"For Publishers","text":"<ul> <li>Publishers SHOULD expose the <code>/.well-known/ucap.json</code> discovery document</li> <li>Publishers MUST configure at least one content tier</li> <li>Publishers SHOULD provide complete metadata (description, category, media) for catalog listing</li> <li>Publishers MAY support multiple content sources</li> </ul>"},{"location":"specification/content-discovery/#for-agents","title":"For Agents","text":"<ul> <li>Agents SHOULD check <code>/.well-known/ucap.json</code> when encountering a publisher URL</li> <li>Agents SHOULD use the Catalog Search capability for broad content discovery</li> <li>Agents SHOULD cache discovery documents for reasonable periods</li> </ul>"},{"location":"specification/identity-linking/","title":"Identity Linking Capability","text":"<ul> <li>Capability Name: <code>dev.ucap.content.identity</code></li> </ul> <p>Link agent identity to user identity via OAuth 2.0. This enables agents to act on behalf of a specific user, accessing their entitlements and managing their subscriptions.</p>"},{"location":"specification/identity-linking/#overview","title":"Overview","text":"<p>Identity linking bridges the gap between agent authentication (RFC 9421 HTTP signatures) and user authorization (OAuth 2.0). Once linked, an agent can make requests that reference a user's entitlements without the user being present.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Identity Linking Flow                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502   1. Agent discovers OAuth server metadata                  \u2502\n\u2502      GET /.well-known/oauth-authorization-server            \u2502\n\u2502                                                             \u2502\n\u2502   2. Agent redirects user to authorization endpoint         \u2502\n\u2502      GET /oauth/authorize?client_id=...&amp;scope=read          \u2502\n\u2502                                                             \u2502\n\u2502   3. User authorizes the agent                              \u2502\n\u2502      (Human approves in browser)                            \u2502\n\u2502                                                             \u2502\n\u2502   4. Agent exchanges code for token                         \u2502\n\u2502      POST /oauth/token                                      \u2502\n\u2502                                                             \u2502\n\u2502   5. Agent uses token in subsequent requests                \u2502\n\u2502      Authorization: Bearer {user_token}                     \u2502\n\u2502                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/identity-linking/#endpoints","title":"Endpoints","text":"Method Path Description <code>GET</code> <code>/.well-known/oauth-authorization-server</code> OAuth server metadata discovery <code>GET</code> <code>/oauth/authorize</code> Authorization endpoint <code>POST</code> <code>/oauth/token</code> Token endpoint"},{"location":"specification/identity-linking/#oauth-server-discovery","title":"OAuth Server Discovery","text":"RequestResponse <pre><code>GET /.well-known/oauth-authorization-server HTTP/1.1\nHost: api.example.com\n</code></pre> <pre><code>{\n  \"issuer\": \"https://api.example.com\",\n  \"authorization_endpoint\": \"https://api.example.com/oauth/authorize\",\n  \"token_endpoint\": \"https://api.example.com/oauth/token\",\n  \"scopes_supported\": [\"read\", \"subscribe\", \"manage\"],\n  \"response_types_supported\": [\"code\"],\n  \"grant_types_supported\": [\"authorization_code\", \"refresh_token\"]\n}\n</code></pre>"},{"location":"specification/identity-linking/#scopes","title":"Scopes","text":"Scope Description <code>read</code> Read content on behalf of the user <code>subscribe</code> Initiate subscriptions on behalf of the user <code>manage</code> Manage entitlements (cancel, modify)"},{"location":"specification/identity-linking/#guidelines","title":"Guidelines","text":""},{"location":"specification/identity-linking/#for-ucap-servers","title":"For UCAP Servers","text":"<ul> <li>Servers MUST implement the OAuth 2.0 Authorization Code flow per RFC 6749</li> <li>Servers MUST support the <code>/.well-known/oauth-authorization-server</code> discovery endpoint</li> <li>Servers SHOULD support refresh tokens for long-lived agent access</li> <li>Servers MUST validate both the RFC 9421 HTTP signature and the OAuth bearer token on identity-linked requests</li> </ul>"},{"location":"specification/identity-linking/#for-agents","title":"For Agents","text":"<ul> <li>Agents MUST discover OAuth endpoints via the well-known URL before initiating the flow</li> <li>Agents MUST request only the scopes they need</li> <li>Agents SHOULD store and refresh tokens securely</li> <li>Agents MUST handle token expiration gracefully</li> </ul>"},{"location":"specification/mcp-integration/","title":"MCP Integration","text":"<p>UCAP servers MAY expose functionality via MCP (Model Context Protocol) for AI agents. MCP provides a natural integration point for AI assistants like Claude.</p>"},{"location":"specification/mcp-integration/#mcp-tools","title":"MCP Tools","text":"<p>UCAP defines the following MCP tools, each mapping to a protocol capability:</p>"},{"location":"specification/mcp-integration/#search_catalog","title":"search_catalog","text":"<p>Maps to: <code>dev.ucap.content.catalog.search</code></p> <pre><code>name: search_catalog\ndescription: Search for publications and posts by query, category, price, and recency\ninputSchema:\n  type: object\n  properties:\n    query:\n      type: string\n      description: Free-text search query\n    filters:\n      type: object\n      properties:\n        categories:\n          type: array\n          items: { type: string }\n          description: Filter by category/tag\n        price:\n          type: object\n          properties:\n            max:\n              type: integer\n              description: Maximum price in cents per month\n        language:\n          type: string\n          description: Content language (BCP 47)\n        recency:\n          type: string\n          enum: [\"24h\", \"7d\", \"30d\", \"90d\"]\n          description: Content freshness filter\n    context:\n      type: object\n      properties:\n        language:\n          type: string\n          description: Preferred language\n        currency:\n          type: string\n          description: Preferred currency (ISO 4217)\n        intent:\n          type: string\n          description: Semantic description of search goal\n    pagination:\n      type: object\n      properties:\n        limit:\n          type: integer\n          description: Results per page (default 10, max 25)\n        cursor:\n          type: string\n          description: Pagination cursor\n</code></pre>"},{"location":"specification/mcp-integration/#get_catalog_item","title":"get_catalog_item","text":"<p>Maps to: <code>dev.ucap.content.catalog.lookup</code></p> <pre><code>name: get_catalog_item\ndescription: Get publication or post details by ID (supports multiple ID formats)\ninputSchema:\n  type: object\n  properties:\n    id:\n      type: string\n      description: &gt;\n        ID in format: pub_{id}, post_{id}, slug:{slug},\n        patreon:{id}, url:{encoded_url}\n    context:\n      type: object\n      properties:\n        language:\n          type: string\n        currency:\n          type: string\n  required: [id]\n</code></pre>"},{"location":"specification/mcp-integration/#read_content","title":"read_content","text":"<p>Maps to: <code>dev.ucap.content.access</code></p> <pre><code>name: read_content\ndescription: Read full content from a post (may return 402 if subscription required)\ninputSchema:\n  type: object\n  properties:\n    publisher_id:\n      type: string\n      description: Publication ID\n    post_id:\n      type: string\n      description: Post ID\n  required: [publisher_id, post_id]\n</code></pre>"},{"location":"specification/mcp-integration/#subscribe","title":"subscribe","text":"<p>Maps to: <code>dev.ucap.content.subscription</code></p> <pre><code>name: subscribe\ndescription: &gt;\n  Subscribe to a publisher (returns checkout URL for human payment)\ninputSchema:\n  type: object\n  properties:\n    publisher_id:\n      type: string\n    tier_id:\n      type: string\n    payment_method:\n      type: string\n      enum: [\"stripe\"]\n      description: Payment method preference\n  required: [publisher_id, tier_id]\n</code></pre>"},{"location":"specification/mcp-integration/#list_entitlements","title":"list_entitlements","text":"<p>Maps to: <code>dev.ucap.content.subscription</code></p> <pre><code>name: list_entitlements\ndescription: List active subscriptions for the authenticated agent/user\ninputSchema:\n  type: object\n  properties: {}\n</code></pre>"},{"location":"specification/mcp-integration/#mcp-as-wrapper","title":"MCP as Wrapper","text":"<p>MCP tools SHOULD wrap the HTTP API, not replace it. This ensures that:</p> <ul> <li>The HTTP API remains the source of truth</li> <li>MCP tools inherit authentication and authorization from the HTTP layer</li> <li>Server implementations don't need to maintain two separate codebases</li> </ul>"},{"location":"specification/mcp-integration/#example-implementation","title":"Example Implementation","text":"<pre><code>async def ucap_read(publisher_id: str, post_id: str) -&gt; dict:\n    \"\"\"MCP tool wraps HTTP API\"\"\"\n    response = await http_client.get(\n        f\"https://api.ucap.example/v1/content/{publisher_id}/{post_id}\",\n        headers=sign_request_with_http_signatures()\n    )\n\n    if response.status == 402:\n        return {\n            \"status\": \"payment_required\",\n            \"offers\": response.json()[\"offers\"],\n            \"message\": \"Please click the checkout URL to subscribe\"\n        }\n\n    return {\n        \"status\": \"ok\",\n        \"content\": response.json()[\"content\"]\n    }\n</code></pre>"},{"location":"specification/mcp-integration/#guidelines","title":"Guidelines","text":""},{"location":"specification/mcp-integration/#for-ucap-servers","title":"For UCAP Servers","text":"<ul> <li>Servers MAY expose capabilities as MCP tools</li> <li>MCP tools SHOULD be thin wrappers around the HTTP API</li> <li>Servers MUST still verify RFC 9421 HTTP signatures for MCP-originated requests</li> <li>Servers SHOULD document which MCP tools are available in their discovery endpoint</li> </ul>"},{"location":"specification/mcp-integration/#for-agents","title":"For Agents","text":"<ul> <li>Agents SHOULD prefer MCP tools when available for tighter integration</li> <li>Agents MUST handle <code>payment_required</code> responses from MCP tools the same as HTTP 402 responses</li> <li>Agents SHOULD use the <code>intent</code> field in the <code>context</code> parameter for better results</li> </ul>"},{"location":"specification/overview/","title":"Specification Overview","text":"<p>Version: 1.1.0-draft Status: Draft Specification Last Updated: 2026-02-06</p>"},{"location":"specification/overview/#conventions","title":"Conventions","text":"<p>The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this specification are to be interpreted as described in RFC 2119 and RFC 8174.</p>"},{"location":"specification/overview/#protocol-capabilities","title":"Protocol Capabilities","text":"<p>UCAP defines five core capabilities, following the composable pattern from UCP:</p> Capability ID Description Content Access <code>dev.ucap.content.access</code> Fetch published content with automatic entitlement checking Catalog Search <code>dev.ucap.content.catalog.search</code> Free-text search across publishers and posts Catalog Lookup <code>dev.ucap.content.catalog.lookup</code> Direct lookup by publication or post ID Subscription <code>dev.ucap.content.subscription</code> Subscribe to publishers and manage entitlements Identity Linking <code>dev.ucap.content.identity</code> Link agent identity to user identity via OAuth"},{"location":"specification/overview/#capability-design","title":"Capability Design","text":"<p>Each capability is independently implementable. A conformant UCAP server MUST implement Content Access and SHOULD implement Catalog Search and Catalog Lookup. Other capabilities are OPTIONAL.</p> <p>Capabilities follow a reverse-domain naming convention (<code>dev.ucap.*</code>) consistent with UCP's namespace governance model.</p>"},{"location":"specification/overview/#capability-composition","title":"Capability Composition","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   UCAP Capabilities                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                          \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502   \u2502            Content Access (REQUIRED)            \u2502    \u2502\n\u2502   \u2502          dev.ucap.content.access                \u2502    \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                          \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502   \u2502   Catalog Search     \u2502 \u2502   Catalog Lookup       \u2502    \u2502\n\u2502   \u2502  (RECOMMENDED)       \u2502 \u2502  (RECOMMENDED)         \u2502    \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                          \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502   \u2502   Subscription       \u2502 \u2502   Identity Linking     \u2502    \u2502\n\u2502   \u2502  (OPTIONAL)          \u2502 \u2502  (OPTIONAL)            \u2502    \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/overview/#transport-bindings","title":"Transport Bindings","text":"<p>UCAP capabilities can be accessed through multiple transport bindings:</p> Transport Description Use Case REST / HTTP Standard HTTP API with JSON request/response Direct integration, server-to-server MCP Model Context Protocol tools AI agent integration (Claude, etc.)"},{"location":"specification/overview/#rest-http","title":"REST / HTTP","text":"<p>The primary transport. All capabilities define HTTP endpoints under the <code>/v1/</code> path prefix. Requests and responses use <code>application/json</code>.</p>"},{"location":"specification/overview/#mcp","title":"MCP","text":"<p>UCAP servers MAY expose capabilities as MCP tools. MCP tools SHOULD wrap the HTTP API, not replace it. See MCP Integration for details.</p>"},{"location":"specification/overview/#versioning","title":"Versioning","text":"<p>The UCAP specification follows Semantic Versioning 2.0:</p> <ul> <li>Major version for breaking changes to capability interfaces</li> <li>Minor version for new capabilities or backward-compatible additions</li> <li>Patch version for clarifications and editorial fixes</li> </ul> <p>All HTTP endpoints are prefixed with <code>/v1/</code> for the current major version.</p>"},{"location":"specification/overview/#references","title":"References","text":"<ul> <li>UCP \u2014 Universal Commerce Protocol</li> <li>RFC 9421 \u2014 HTTP Message Signatures</li> <li>RFC 9421 \u2014 HTTP Message Signatures</li> <li>RFC 6749 \u2014 OAuth 2.0</li> <li>MCP \u2014 Model Context Protocol</li> <li>BCP 47 \u2014 Language Tags</li> <li>ISO 4217 \u2014 Currency Codes</li> </ul>"},{"location":"specification/payment-flow/","title":"Payment Flow","text":"<p>UCAP uses a human-in-the-loop payment model. Agents facilitate content discovery and present payment options, but humans always authorize and complete payments.</p>"},{"location":"specification/payment-flow/#flow-overview","title":"Flow Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    UCAP Payment Flow                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  1. Agent requests content                                      \u2502\n\u2502     GET /v1/content/publisher/post                              \u2502\n\u2502                                                                 \u2502\n\u2502  2. Server returns 402 with offers                              \u2502\n\u2502     { offers: [{ checkout_url: \"...\" }] }                       \u2502\n\u2502                                                                 \u2502\n\u2502  3. Agent presents checkout URL to human                        \u2502\n\u2502     \"Click here to subscribe: [link]\"                           \u2502\n\u2502                                                                 \u2502\n\u2502  4. Human completes payment in browser                          \u2502\n\u2502     - Visits checkout URL                                       \u2502\n\u2502     - Pays via Stripe/Google Pay/etc.                           \u2502\n\u2502                                                                 \u2502\n\u2502  5. Server mints entitlement                                    \u2502\n\u2502     - Webhook from payment processor                            \u2502\n\u2502     - Entitlement stored for user+agent                         \u2502\n\u2502                                                                 \u2502\n\u2502  6. Agent requests content again                                \u2502\n\u2502     GET /v1/content/publisher/post                              \u2502\n\u2502                                                                 \u2502\n\u2502  7. Server returns 200 with content                             \u2502\n\u2502     { content: \"...\" }                                          \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/payment-flow/#step-by-step","title":"Step-by-Step","text":""},{"location":"specification/payment-flow/#1-content-request","title":"1. Content Request","text":"<p>The agent requests content as normal via the Content Access capability.</p>"},{"location":"specification/payment-flow/#2-payment-required-response","title":"2. Payment Required Response","text":"<p>The server returns <code>402 Payment Required</code> with one or more subscription offers. Each offer includes a <code>checkout_url</code>.</p>"},{"location":"specification/payment-flow/#3-human-handoff","title":"3. Human Handoff","text":"<p>The agent presents the checkout URL to the human user. The agent MUST NOT auto-purchase via Stripe or similar traditional payment methods.</p> <p>Human-in-the-loop</p> <p>The checkout URL is the critical handoff point. Agents present the URL; humans click and pay. This keeps payment authorization under human control.</p>"},{"location":"specification/payment-flow/#4-payment-completion","title":"4. Payment Completion","text":"<p>The human visits the checkout URL in a browser and completes payment through the publisher's payment processor (Stripe, Google Pay, etc.).</p>"},{"location":"specification/payment-flow/#5-entitlement-minting","title":"5. Entitlement Minting","text":"<p>After successful payment, the payment processor notifies the UCAP server via webhook. The server creates an entitlement record linking the user (and optionally the agent) to the publisher's content tier.</p>"},{"location":"specification/payment-flow/#67-entitled-access","title":"6\u20137. Entitled Access","text":"<p>The agent requests the same content again. This time the server finds a valid entitlement and returns the full content with a <code>200 OK</code>.</p>"},{"location":"specification/payment-flow/#checkout-url","title":"Checkout URL","text":"<p>The <code>checkout_url</code> returned in 402 responses leads to a payment page. The URL:</p> <ul> <li>Contains a session ID for tracking</li> <li>Expires after a reasonable time (e.g., 1 hour)</li> <li>Redirects back to agent context after completion (if supported)</li> </ul>"},{"location":"specification/payment-flow/#ucp-integration","title":"UCP Integration","text":"<p>UCAP servers MAY use UCP for payment processing. When UCP is used, offers include a <code>ucp_plan_id</code>:</p> <pre><code>{\n  \"offers\": [\n    {\n      \"tier_id\": \"premium\",\n      \"checkout_url\": \"https://ucp.example.com/checkout/session_abc\",\n      \"ucp_plan_id\": \"plan_premium_monthly\"\n    }\n  ]\n}\n</code></pre>"},{"location":"specification/payment-flow/#guidelines","title":"Guidelines","text":""},{"location":"specification/payment-flow/#for-ucap-servers","title":"For UCAP Servers","text":"<ul> <li>Servers MUST include at least one offer with a <code>checkout_url</code> in 402 responses</li> <li>Servers MUST expire checkout sessions after a reasonable period</li> <li>Servers SHOULD support webhook-based entitlement minting</li> <li>Servers MAY support UCP for payment processing</li> </ul>"},{"location":"specification/payment-flow/#for-agents","title":"For Agents","text":"<ul> <li>Agents MUST present checkout URLs to humans \u2014 not auto-purchase</li> <li>Agents MUST handle the async nature of payment (poll or wait for entitlement)</li> <li>Agents SHOULD inform the user about the subscription price before presenting the checkout URL</li> </ul>"},{"location":"specification/reference/","title":"Reference","text":"<p>This page consolidates authentication details, security considerations, error codes, and format references for the UCAP specification.</p>"},{"location":"specification/reference/#authentication-authorization","title":"Authentication &amp; Authorization","text":""},{"location":"specification/reference/#agent-authentication-http-message-signatures","title":"Agent Authentication (HTTP Message Signatures)","text":"<p>All UCAP requests MUST include HTTP Message Signatures per RFC 9421.</p>"},{"location":"specification/reference/#required-headers","title":"Required Headers","text":"Header Description <code>Signature-Agent</code> Agent's unique identifier <code>Signature</code> Base64-encoded Ed25519 signature <code>Signature-Input</code> Signature parameters including covered components <code>Date</code> Request timestamp (for replay protection)"},{"location":"specification/reference/#signature-components","title":"Signature Components","text":"<p>The signature MUST cover at minimum:</p> <pre><code>(\"@method\" \"@path\" \"host\" \"date\")\n</code></pre> <p>For requests with bodies:</p> <pre><code>(\"@method\" \"@path\" \"host\" \"date\" \"content-type\" \"content-digest\")\n</code></pre>"},{"location":"specification/reference/#jwks-resolution","title":"JWKS Resolution","text":"<p>UCAP servers resolve agent public keys via the agent's JWKS endpoint:</p> <pre><code>https://{agent_host}/.well-known/jwks.json\n</code></pre>"},{"location":"specification/reference/#ucap-purpose-header","title":"UCAP-Purpose Header","text":"<p>Agents SHOULD declare their intent using the <code>UCAP-Purpose</code> header:</p> Purpose Description <code>read</code> Reading content for human consumption <code>summarize</code> Generating summaries (may require attribution) <code>index</code> Indexing for search (metadata only) <code>archive</code> Archival purposes <pre><code>UCAP-Purpose: summarize\n</code></pre>"},{"location":"specification/reference/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/reference/#agent-verification","title":"Agent Verification","text":"<ul> <li>All agent requests MUST include valid HTTP Message Signatures per RFC 9421</li> <li>Signatures MUST be verified against the agent's JWKS</li> <li>Replay attacks MUST be prevented via nonce/timestamp checking</li> </ul>"},{"location":"specification/reference/#rate-limiting","title":"Rate Limiting","text":"<p>UCAP servers SHOULD implement rate limiting:</p> Tier Limit Unauthenticated 10 requests/hour Authenticated (free) 100 requests/hour Subscribed 1000 requests/hour <p>Rate-limited responses MUST use HTTP status <code>429 Too Many Requests</code> and SHOULD include a <code>Retry-After</code> header.</p>"},{"location":"specification/reference/#content-attribution","title":"Content Attribution","text":"<p>Publishers MAY require attribution for AI-processed content:</p> <pre><code>{\n  \"attribution\": {\n    \"required\": true,\n    \"license\": \"CC-BY-4.0\",\n    \"format\": \"Source: [Title](URL) by Author\"\n  }\n}\n</code></pre>"},{"location":"specification/reference/#capability-identifiers","title":"Capability Identifiers","text":"Capability ID Description <code>dev.ucap.content.access</code> Fetch content with entitlement checking <code>dev.ucap.content.catalog.search</code> Free-text search with filters <code>dev.ucap.content.catalog.lookup</code> Direct ID lookup <code>dev.ucap.content.subscription</code> Subscription management <code>dev.ucap.content.identity</code> OAuth identity linking"},{"location":"specification/reference/#media-types","title":"Media Types","text":"Media Type Description <code>application/json</code> Default for all responses <code>application/ucap+json</code> UCAP-specific responses (optional)"},{"location":"specification/reference/#error-codes","title":"Error Codes","text":"Code HTTP Status Description <code>payment_required</code> 402 Subscription needed <code>agent_unauthorized</code> 403 Invalid or missing signature <code>content_not_found</code> 404 Post does not exist <code>NOT_FOUND</code> 200 Catalog item not found (UCP convention) <code>rate_limited</code> 429 Too many requests <code>server_error</code> 500 Internal error"},{"location":"specification/reference/#id-format-reference","title":"ID Format Reference","text":"Format Pattern Example Description Publication ID <code>pub_{id}</code> <code>pub_ai-digest</code> Internal publication identifier Post ID <code>post_{id}</code> <code>post_abc123</code> Internal post identifier Slug <code>slug:{slug}</code> <code>slug:ai-digest</code> URL-friendly identifier Patreon <code>patreon:{id}</code> <code>patreon:12345678</code> Patreon campaign or post ID Ghost <code>ghost:{id}</code> <code>ghost:abc123</code> Ghost post ID URL <code>url:{encoded}</code> <code>url:https%3A%2F%2F...</code> Original content URL (URL-encoded)"},{"location":"specification/reference/#context-fields","title":"Context Fields","text":"Field Type Description Example <code>language</code> string BCP 47 language tag <code>\"en\"</code>, <code>\"es\"</code>, <code>\"fr-CA\"</code> <code>currency</code> string ISO 4217 currency code <code>\"USD\"</code>, <code>\"EUR\"</code>, <code>\"GBP\"</code> <code>country</code> string ISO 3166-1 alpha-2 <code>\"US\"</code>, <code>\"GB\"</code>, <code>\"DE\"</code> <code>intent</code> string Semantic search description <code>\"weekly AI news digest\"</code>"},{"location":"specification/subscription/","title":"Subscription Capability","text":"<ul> <li>Capability Name: <code>dev.ucap.content.subscription</code></li> </ul> <p>Handle subscription creation and entitlement management. This capability enables agents to initiate subscriptions on behalf of users and query active entitlements.</p>"},{"location":"specification/subscription/#endpoints","title":"Endpoints","text":"Method Path Description <code>POST</code> <code>/v1/subscribe</code> Create a new subscription <code>GET</code> <code>/v1/entitlements</code> List active entitlements <code>DELETE</code> <code>/v1/entitlements/{id}</code> Cancel an entitlement"},{"location":"specification/subscription/#operations","title":"Operations","text":""},{"location":"specification/subscription/#create-subscription","title":"Create Subscription","text":"<p>Initiate a subscription to a publisher's tier. Returns a checkout URL for the human to complete payment.</p> RequestResponse <pre><code>POST /v1/subscribe HTTP/1.1\nHost: api.example.com\nContent-Type: application/json\nSignature-Agent: {agent_id}\nSignature: sig=:{base64_signature}:\nAuthorization: Bearer {user_token}\n\n{\n  \"publisher_id\": \"ai-digest\",\n  \"tier_id\": \"pro\",\n  \"payment_method\": \"stripe\"\n}\n</code></pre> <pre><code>{\n  \"status\": \"pending_payment\",\n  \"checkout\": {\n    \"session_id\": \"session_abc123\",\n    \"url\": \"https://example.com/checkout/session_abc123\",\n    \"expires_at\": \"2026-02-04T13:00:00Z\"\n  },\n  \"message\": \"Complete payment to activate subscription\"\n}\n</code></pre>"},{"location":"specification/subscription/#request-fields","title":"Request Fields","text":"Field Type Required Description <code>publisher_id</code> string Yes Publisher to subscribe to <code>tier_id</code> string Yes Subscription tier <code>payment_method</code> string No Payment method preference (e.g., <code>\"stripe\"</code>)"},{"location":"specification/subscription/#list-entitlements","title":"List Entitlements","text":"<p>Retrieve all active subscriptions for the authenticated agent/user.</p> RequestResponse <pre><code>GET /v1/entitlements HTTP/1.1\nHost: api.example.com\nAuthorization: Bearer {user_token}\n</code></pre> <pre><code>{\n  \"entitlements\": [\n    {\n      \"id\": \"ent-123\",\n      \"publisher_id\": \"ai-digest\",\n      \"publisher_name\": \"AI Digest Weekly\",\n      \"tier_id\": \"pro\",\n      \"tier_name\": \"Pro\",\n      \"status\": \"active\",\n      \"created_at\": \"2026-01-15T10:00:00Z\",\n      \"renews_at\": \"2026-02-15T10:00:00Z\",\n      \"price\": {\n        \"amount\": 800,\n        \"currency\": \"USD\",\n        \"interval\": \"month\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"specification/subscription/#entitlement-fields","title":"Entitlement Fields","text":"Field Type Description <code>id</code> string Entitlement identifier <code>publisher_id</code> string Publisher identifier <code>publisher_name</code> string Publisher display name <code>tier_id</code> string Subscription tier ID <code>tier_name</code> string Subscription tier display name <code>status</code> string Status: <code>\"active\"</code>, <code>\"expired\"</code>, <code>\"cancelled\"</code> <code>created_at</code> string Subscription start timestamp (RFC 3339) <code>renews_at</code> string Next renewal timestamp (RFC 3339) <code>price</code> object Subscription price with <code>amount</code>, <code>currency</code>, <code>interval</code>"},{"location":"specification/subscription/#guidelines","title":"Guidelines","text":""},{"location":"specification/subscription/#for-ucap-servers","title":"For UCAP Servers","text":"<ul> <li>Servers MUST return a checkout URL in the subscription response</li> <li>Servers MUST NOT process payments directly \u2014 the checkout URL leads to a payment page for the human</li> <li>Servers SHOULD set a reasonable expiration on checkout sessions (e.g., 1 hour)</li> <li>Servers MUST mint entitlements after successful payment via webhook</li> <li>Servers SHOULD support entitlement listing for identity-linked agents</li> </ul>"},{"location":"specification/subscription/#for-agents","title":"For Agents","text":"<ul> <li>Agents MUST present the checkout URL to the human \u2014 not auto-purchase</li> <li>Agents SHOULD check entitlements before requesting content to avoid unnecessary 402 responses</li> </ul>"}]}